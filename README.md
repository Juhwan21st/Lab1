# Lab1: Refactoring Exercise – Software Design Principles & Patterns

## Overview

Lab1 is a C# refactoring project for the course "Software Design Principles & Patterns."<br>
The main task is to refactor a legacy billing script for a theater company to make the code clean, testable, and easy to extend.

## Features
- **Loads performance and play data from JSON files**
- **Calculates charges and volume credits for each play**
- **Generates two types of statements:**
  - Plain text statement (console)
  - HTML statement (console, browser view)
- **Easily extended to support new play types through the calculator registry**

## Architecture/Design Explanation 
- Calculation (charges/credits) and output (plain text/HTML statement) are clearly separated into different classes.
- Each play type is handled by its own class that implements ICalculator.
- To add a new type, just make a new class and register it in the calculator registry
  - No need to touch the main logic or use a switch statement.

## File/Folder Structure
![Lab1](https://github.com/Juhwan21st/Lab1/blob/main/output_img/FIleStructure.png)

### Key Files and Roles
- **Program.cs**: Loads data, kicks off calculation and output.
- **Calculators/ folder**:
  - **ICalculator.cs**: Interface for play type calculators.
  - TragedyCalculator.cs, ComedyCalculator.cs: Handles specific business rules.
- **CreateStatementData.cs**:
  - Uses a registry to pick the right calculator for each play type.
- **Statement.cs**: Makes the final output (plain text, HTML).

### How it works:
`Program.cs` → `CreateStatementData.cs` (with registry) → Each play calculator → `Statement.cs` for output.

## How to Run / How to Test
1. Download the project as a ZIP from GitHub and unzip it anywhere.
2. Open the solution file (`Lab1.sln`) in Visual Studio.
3. Build and run the project (F5).
4. The console will show both the plain text and HTML-formatted statement, and the HTML page will open automatically in your main browser.

## Sample Output
The following is a sample statement generated by the project:

![Lab1](https://github.com/Juhwan21st/Lab1/blob/main/output_img/execution%20result.png)

- Console output:
```
Plain Text:
Statement for BigCo
  Hamlet: $650.00 (55 seats)
  As You Like It: $580.00 (35 seats)
  Othello: $500.00 (40 seats)
Amount owed is $1,730.00
You earned 47 credits

HTML:
<h1>Statement for BigCo</h1>
<table>
<tr><th>Play</th><th>Seats</th><th>Cost</th></tr>
<tr><td>Hamlet</td><td>55</td><td>$650.00</td></tr>
<tr><td>As You Like It</td><td>35</td><td>$580.00</td></tr>
<tr><td>Othello</td><td>40</td><td>$500.00</td></tr>
</table>
<p>Amount owed is <em>$1,730.00</em></p>
<p>You earned <em>47</em> credits</p>
```

## Extending
To add a new play type:
- Implement a new calculator class that inherits `ICalculator` and writes its own calculation logic.
- Register the type in `CreateStatementData`.

> **Example:**  
> To add "history" as a new play type:  
> 1. Create `HistoryCalculator.cs` in `src/Calculators/`  
> 2. In `CreateStatementData.cs`, add  
>    `calculatorRegistry["history"] = new HistoryCalculator();`